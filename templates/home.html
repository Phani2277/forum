{{define "title"}}–ì–ª–∞–≤–Ω–∞—è{{end}}

{{define "content"}}
  <div class="section filter-panel">
    <div class="filter-group">
      <div class="filter-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
      <div class="filter-chips">
        <a class="chip{{if .AllActive}} active{{end}}" href="/">–í—Å–µ</a>
        {{range .Categories}}
          <a class="chip{{if eq $.SelectedCategoryID .ID}} active{{end}}" href="/?category_id={{.ID}}">{{.Name}}</a>
        {{end}}
      </div>
    </div>

    {{if .CurrentUser}}
      <div class="filter-group">
        <div class="filter-label">–§–∏–ª—å—Ç—Ä—ã</div>
        <div class="filter-chips">
          <a class="chip{{if .MineActive}} active{{end}}" href="/?mine=1">–ú–æ–∏</a>
          <a class="chip{{if .LikedActive}} active{{end}}" href="/?liked=1">–õ–∞–π–∫–Ω—É—Ç—ã–µ</a>
        </div>
      </div>
    {{end}}
  </div>

  <div class="section">
    <div class="section-title">
      <h2>–ü–æ—Å—Ç—ã</h2>
      <span class="muted">{{len .Posts}}</span>
    </div>
  </div>

  {{range .Posts}}
    <div class="card">
      <div class="row post-head">
        <h3 class="post-title">{{.Title}}</h3>
        <a class="pill" href="/post?id={{.ID}}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
      </div>
      <div class="muted post-meta">
        –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{.CategoryName}} ‚Ä¢ –ê–≤—Ç–æ—Ä: {{.AuthorName}}
      </div>
      <p>{{.Content}}</p>

      <div class="row">
        <form class="inline" method="POST" action="/react-post">
          <input type="hidden" name="post_id" value="{{.ID}}">
          <input type="hidden" name="value" value="1">
          <button class="btn ghost icon" type="submit">üëç</button>
        </form>

        <form class="inline" method="POST" action="/react-post">
          <input type="hidden" name="post_id" value="{{.ID}}">
          <input type="hidden" name="value" value="-1">
          <button class="btn ghost icon" type="submit">üëé</button>
        </form>

        <span class="muted">üëç {{.Likes}} ‚Ä¢ üëé {{.Dislikes}}</span>
      </div>

      <div style="margin-top:10px">
        {{range .Comments}}
          <div class="comment"><b>{{.AuthorName}}:</b> {{.Content}}</div>
        {{end}}
      </div>

      {{if $.CurrentUser}}
        <form class="actions" method="POST" action="/addcomment">
          <input type="hidden" name="post_id" value="{{.ID}}">
          <input class="comment-input" type="text" name="content" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π">
          <button class="btn" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </form>
      {{else}}
        <div class="muted" style="margin-top:10px">–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å</div>
      {{end}}
    </div>
  {{end}}
{{end}}
